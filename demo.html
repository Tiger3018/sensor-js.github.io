<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Demo - The Web's Sixth Sense: A Study of Scripts Accessing Smartphone Sensors</title>
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <title>Sensor Access Demo</title>
    <style>
      p {margin-bottom: 0.3rem;}
    </style>
</head>
<body>
<main role="main" class="container">

<h1 align="left">Sensor Access Demo</h1>

<p> This is a demo page showcasing how websites can access sensor data from mobile devices. Two sensor APIs supported by all modern browsers are
<i>deviceorientation</i> and <i>devicemotion</i>.</p>

<p><i>deviceorientation</i> provides <i>alpha</i>, <i>beta</i> and <i>gamma</i> components which correspond to orientation along the Z, X and Y axes, respectively. <i>devicemotion</i> provides acceleration and rotation rate along three axes using MEMS accelerometers and gyroscopes.</p>

<h2>Orientation</h2>
<p id="Orientation_a"></p>
<p id="Orientation_b"></p>
<p id="Orientation_g"></p>

<h2>Accelerometer</h2>
<p id="Accelerometer_x"></p>
<p id="Accelerometer_y"></p>
<p id="Accelerometer_z"></p>
<p id="Accelerometer_i"></p>
<h3>Accelerometer including gravity</h3>
<p id="Accelerometer_gx"></p>
<p id="Accelerometer_gy"></p>
<p id="Accelerometer_gz"></p>

<h2>Gyroscope</h2>
<p id="Gyroscope_x"></p>
<p id="Gyroscope_y"></p>
<p id="Gyroscope_z"></p>
</main>
<script>
var get_el_by_id = document.getElementById;
window.addEventListener('devicelight', function(e) {
   document.getElementById("DeviceLight").innerHTML="AmbientLight current Value: "+e.value+" Max: "+e.max+" Min: "+e.min;
});

window.addEventListener('lightlevel', function(e) {
   document.getElementById("LightString").innerHTML="Light level: "+e.value;
});

window.addEventListener('deviceproximity', function(e) {
   document.getElementById("DeviceProximity").innerHTML="DeviceProximity current Value: "+e.value+" Max: "+e.max+" Min: "+e.min;
});

window.addEventListener('userproximity', function(event) {
   document.getElementById("UserProximity").innerHTML="UserProximity: "+event.near;
});


window.addEventListener("deviceorientation", handleOrientation);

function handleOrientation(event) {
    var absolute = event.absolute;
    var alpha    = event.alpha;
    var beta     = event.beta;
    var gamma    = event.gamma;
    if (event.alpha != null)
        document.getElementById('Orientation_a').innerHTML = "Alpha (Z-axis): "+alpha.toFixed(10);
    if (event.beta != null)
        document.getElementById('Orientation_b').innerHTML = "Beta (X-axis): "+beta.toFixed(10);
    if (event.gamma != null)
        document.getElementById('Orientation_g').innerHTML = "Gamma (Y-axis): "+gamma.toFixed(10);
    // Do stuff with the new orientation data
}


window.addEventListener("devicemotion", handleMotion);

function handleMotion(event) {
  if (event.accelerationIncludingGravity.x != null)
    document.getElementById('Accelerometer_gx').innerHTML = "X-axis: "+event.accelerationIncludingGravity.x.toFixed(10);
  if (event.accelerationIncludingGravity.y != null)
    document.getElementById('Accelerometer_gy').innerHTML = "Y-axis: "+event.accelerationIncludingGravity.y.toFixed(10);
  if (event.accelerationIncludingGravity.z != null)
    document.getElementById('Accelerometer_gz').innerHTML = "Z-axis: "+event.accelerationIncludingGravity.z.toFixed(10);

  if (event.acceleration.x != null)
    document.getElementById('Accelerometer_x').innerHTML = "X-axis: "+event.acceleration.x.toFixed(10);
  if (event.acceleration.y != null)
    document.getElementById('Accelerometer_y').innerHTML = "Y-axis: "+event.acceleration.y.toFixed(10);
  if (event.acceleration.z != null)
    document.getElementById('Accelerometer_z').innerHTML = "Z-axis: "+event.acceleration.z.toFixed(10);

  if (event.interval != null)
    document.getElementById('Accelerometer_i').innerHTML = "Data Interval: "+event.interval.toFixed(10);

  if (event.rotationRate.alpha != null)
    document.getElementById('Gyroscope_z').innerHTML = "Z-axis: "+event.rotationRate.alpha.toFixed(10);
  if (event.rotationRate.beta != null)
    document.getElementById('Gyroscope_x').innerHTML = "X-axis: "+event.rotationRate.beta.toFixed(10);
  if (event.rotationRate.gamma != null)
    document.getElementById('Gyroscope_y').innerHTML = "Y-axis: "+event.rotationRate.gamma.toFixed(10);
}

function handleMotion1(event) {
  if (event.accelerationIncludingGravity.x != null)
        document.getElementById('Accelerometer_tgx').innerHTML = "X: "+event.accelerationIncludingGravity.x.toFixed(10);
  if (event.accelerationIncludingGravity.y != null)
        document.getElementById('Accelerometer_tgy').innerHTML = "Y: "+event.accelerationIncludingGravity.y.toFixed(10);
  if (event.accelerationIncludingGravity.z != null)
        document.getElementById('Accelerometer_tgz').innerHTML = "Z: "+event.accelerationIncludingGravity.z.toFixed(10);

  if (event.acceleration.x != null)
        document.getElementById('Accelerometer_tx').innerHTML = "X: "+event.acceleration.x.toFixed(10);
  if (event.acceleration.y != null)
        document.getElementById('Accelerometer_ty').innerHTML = "Y: "+event.acceleration.y.toFixed(10);
  if (event.acceleration.z != null)
        document.getElementById('Accelerometer_tz').innerHTML = "Z: "+event.acceleration.z.toFixed(10);

  if (event.interval != null)
        document.getElementById('Accelerometer_ti').innerHTML = "Data Interval: "+event.interval.toFixed(10);

  if (event.rotationRate.alpha != null)
        document.getElementById('Gyroscope_tz').innerHTML = "Z: "+event.rotationRate.alpha.toFixed(10);
  if (event.rotationRate.beta != null)
        document.getElementById('Gyroscope_tx').innerHTML = "X: "+event.rotationRate.beta.toFixed(10);
  if (event.rotationRate.gamma != null)
        document.getElementById('Gyroscope_ty').innerHTML = "Y: "+event.rotationRate.gamma.toFixed(10);
  //setTimeout(handler,5000);
}


</script>

</body>
</html>
